Veg_Plot_data_for_level
Veg_Plot_data[Veg_Plot_data$PlotNumber %in% plot_numbers_in_level]
Veg_Plot_data[Veg_Plot_data$PlotNumber %in% plot_numbers_in_level,]
Veg_Plot_data[Veg_Plot_data$PlotNumber %in% plot_numbers_in_level,]
Veg_Plot_data[Veg_Plot_data$PlotNumber %in% plot_numbers_in_level]
Veg_Plot_data[Veg_Plot_data$PlotNumber %in% plot_numbers_in_level,]
VegDat2_data_for_level
VegDat2_data_for_level <-     vegDat2[vegDat2$PlotNumber %in% plot_numbers_in_level,]
VegDat2_data_for_level
tar_option_set(packages = c("data.table", "tidyverse", "rjson"))
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
level.name <- "Order"
level.value <- "ORDER Poputre"
VegDat2_data_for_level
generate_mean_cover(VegDat2_data_for_level)
t <- generate_mean_cover(VegDat2_data_for_level)
t
tar_option_set(packages = c("data.table", "tidyverse", "rjson"))
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
VegDat2_data_for_level
t <- generate_mean_cover(VegDat2_data_for_level)
t
tar_option_set(packages = c("data.table", "tidyverse", "rjson"))
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
t <- generate_mean_cover(VegDat2_data_for_level)
t
VegDat2_data_for_level
species_count <- table(VegDat2_data_for_level)
species_count
names(species_count)
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
t <- generate_mean_cover(VegDat2_data_for_level)
species_count <- table(VegDat2_data_for_level$Species)
species_count
names(species_count)
unique(names(species_count))
VegDat2_data_for_level[VegDat2_data_for_level$Species == "MEDILUP"]
VegDat2_data_for_level$Species
VegDat2_data_for_level$Species == "GEUMTRI"
VegDat2_data_for_level[VegDat2_data_for_level$Species == "MEDILUP",]
VegDat2_data_for_level[VegDat2_data_for_level$Species == "MEDILUP"]
VegDat2_data_for_level[VegDat2_data_for_level$Species == "MEDILUP",]
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
species_count <- table(VegDat2_data_for_level$Species)
t <- generate_mean_cover(VegDat2_data_for_level)
t
t <- generate_mean_cover(VegDat2_data_for_level)
l1 <- list(a=1, b=2, c=3)
l1
l2 <- list(a=2, a=3, a=4)
l2
l1 / l2
Map("/",l1,ol2)
mapply("/",l1,l2,SIMPLIFY = FALSE)
l1
l2
2/3
tar_option_set(packages = c("data.table", "tidyverse", "rjson"))
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
t <- generate_mean_cover(VegDat2_data_for_level)
t
Tree_layer_data
generate_mean_cover(Tree_layer_data)
Tree_layer_data
VegDat2_data_for_level
VegDat2_data_for_level[VegDat2_data_for_level$Species %in% Tree_layer_data$Species]
VegDat2_data_for_level$Species
VegDat2_data_for_level[VegDat2_data_for_level$Species %in% Tree_layer_data$Species]
Tree_layer_data$Species
VegDat2_data_for_level[VegDat2_data_for_level$Species %in% Tree_layer_data$Species,]
Tree_layer_VegDat2_data
Tree_layer_VegDat2_data <-     VegDat2_data_for_level[VegDat2_data_for_level$Species %in% Tree_layer_data$Species,]
Tree_layer_VegDat2_data
generate_mean_cover(Tree_layer_VegDat2_data)
taxon.all[taxon.all$ScientificName %in% Tree_layer_data$Species,]
taxon.all[taxon.all$ScientificName %in% Tree_layer_data$Species]
taxon.all[taxon.all$ScientificName %in% Tree_layer_data$Species,]
taxon.all
taxon.all[taxon.all$ScientificName %in% Tree_layer_data$Species,]
taxon.all$ScientificNam
taxon.all[taxon.all$ScientificName %in% Tree_layer_data$Species,]
Tree_layer_data$Species
Tree_layer_data
Tree_layer_constantcy
Tree_layer_mean_cover
generate_mean_cover(Tree_layer_VegDat2_data)
generate_mean_cover(Tree_layer_VegDat2_data)
generate_mean_cover(Tree_layer_VegDat2_data)
Tree_layer_mean_cover <-     generate_mean_cover(Tree_layer_VegDat2_data)
Tree_layer_taxon.all_data
taxon.all[taxon.all$Code %in% Tree_layer_data$Species,]
Tree_layer_taxon.all_data <-     taxon.all[taxon.all$Code %in% Tree_layer_data$Species,]
all_data
Tree_layer_taxon.all_data <-     taxon.all[taxon.all$Code %in% Tree_layer_data$Species,]
Tree_layer_taxon.all_data
Tree_layer_taxon.all_data$Code
Tree_layer_taxon.all_data$ScientificName
Tree_layer_constantcy
Tree_layer_constantcy
Tree_layer_mean_cover
data.table(Tree_layer_mean_cover, Tree_layer_constantcy)
length(Tree_layer_constantcy)
length(Tree_layer_mean_cover)
Tree_layer_constantcy
Tree_layer_mean_cover
data.frame(Tree_layer_mean_cover)
data.frame(Tree_layer_mean_cover, Tree_layer_constantcy)
merge(Tree_layer_mean_cover, Tree_layer_constantcy)
a <- data.frame(Tree_layer_mean_cover)
a
> b <- data.frame(Tree_layer_constantcy)
b <- data.frame(Tree_layer_constantcy)
merge(a,b)
rjoin(a,b)
merge(x=a,y=b)
Tree_layer_mean_cover
data.frame(cover=Tree_layer_mean_cover)
data.frame(species=names(Tree_layer_mean_cover), cover=Tree_layer_mean_cover)
unlist(Tree_layer_mean_cover)
data.frame(species=names(Tree_layer_mean_cover), cover=unlist(Tree_layer_mean_cover))
data.frame(unlist(Tree_layer_mean_cover))
Tree_layer_mean_cover
t <- data.frame(unlist(Tree_layer_mean_cover))
colnames(t) <- c("species", "cover")
t
names(t)
joint(t, Tree_layer_constantcy)
Tree_layer_constantcy
names(t)
t
Tree_layer_constantcy
rownames(t)
t <- data.frame(unlist(Tree_layer_mean_cover))
q <- data.frame(unlist(Tree_layer_constantcy))
q
merge(t,q)
joint(t,q)
join(t,q)
merge(t,q, by=0, all=TRUE)
tree_table <- merge(constantcy,cover, by=0, all=TRUE)
constantcy <- data.frame(unlist(Tree_layer_constantcy))
cover <- data.frame(unlist(Tree_layer_mean_cover))
tree_table <- merge(constantcy,cover, by=0, all=TRUE)
tree_table
names(tree_table) <- c
names(tree_table) <- c("species", "constantcy", "mean_cover")
tree_table
Tree_layer_taxon.all_data[Tree_layer_taxon.all_data$Code %in% tree_table$species]
Tree_layer_taxon.all_data[Tree_layer_taxon.all_data$Code %in% tree_table$species]
t <-   Tree_layer_taxon.all_data[Tree_layer_taxon.all_data$Code %in% tree_table$species]
t
t[,c("Code", "ScientificName", "EnglishName")]
Tree_layer_taxon.all_data[Tree_layer_taxon.all_data$Code %in% tree_table$species][,c("Code", "ScientificName", "EnglishName")]
tree_table
merge(X, Y, by=c('id', 'ID'))
extra_data <- Tree_layer_taxon.all_data[Tree_layer_taxon.all_data$Code %in% tree_table$species][,c("Code", "ScientificName", "EnglishName")]
extra_data
tree_table <- merge(constantcy,cover, by=0, all=TRUE)
names(tree_table) <- c("species", "constantcy", "meanCover")
tree_table
tree_table
extra_data
merge(tree_table, extra_data, by=c('id', 'ID'))
merge(tree_table, extra_data, by=c('Code', 'species'))
merge(tree_table, extra_data, by=c('Code', 'species'))
merge(x=tree_table, y=extra_data, by.x="species", by.y="extra_data")
merge(x=tree_table, y=extra_data, by.x="species", by.y="Code")
library(targets)
tar_option_set(packages = c("data.table", "tidyverse", "rjson"))
files.sources <- list.files("_functions")
sapply(paste("_functions/", files.sources, sep=""), source)
level.name <- "Order"
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
site_units
# Select relevent rows from Heir.data
level_rows <- Hier.data %>% filter(!!as.name(level_name) == level_value )
# Levels
site_units <- unique(level_rows$SiteUnit)
classes <- unique(level_rows$Class)
site_units
# Levels
site_units <- unique(level_rows$SiteUnit)
classes <- unique(level_rows$Class)
orders <- unique(level_rows$Order)
sub_orders <- unique(level_rows$Suborder)
alliances <- unique(level_rows$Alliance)
associations <- unique(level_rows$Assoc)
heir_summary <- list(site_units, classes, orders, sub_orders, alliances, associations)
# Categorical Variables
heir_summary[["species_frequency_count"]] <- list(table(level_rows$Species))
# Variables
mean_cover <- level_rows$MeanCov
constancy <- level_rows$Constancy
number_of_plots <- level_rows$nPlots
# Aggregated Variables
heir_summary[["average_mean_cover"]] <- mean(mean_cover)
heir_summary[["average_constancy"]] <- mean(constancy)
heir_summary[["total_number_of_plots"]] <- sum(number_of_plots)
# Save heir report
# reports_dir <- file.path("reports", level_name)
# if (!dir.exists(reports_dir)) dir.create(reports_dir, recursive = TRUE)
#
file_name <- paste(str_replace_all(level_value, " ", "_"), ".RDS",  sep="")
saveRDS(heir_summary, file = file.path(reports_dir, file_name))
heir_summary_file_path <- file.path(reports_dir, file_name)
plot_numbers_in_level <- SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
plot_numbers_in_level_file_path <- paste("plot_numbers_in_" , str_replace_all(level_value, " ", "_"), ".RDS", sep="")
saveRDS(plot_numbers_in_level, file=plot_numbers_in_level_file_path)
# Save plot numbers
# if (!file.exists(paste(dir, "/", "plot_numbers_in_", level_value, ".RDS", sep=""))) {
#   plot_numbers_in_level <- list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
#   saveRDS(plot_numbers_in_level, file =(paste("plot_numbers_in_" , level_value, ".RDS", sep="")))
# }
print(plot_numbers_in_level)
#return(list(heir_summary=heir_summary_file_path, plot_numbers_in_level=plot_numbers_in_level_file_path))
return(plot_numbers_in_level_file_path)
heir_summary
heir_summary
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
rlang::last_error()
rlang::last_error()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
tar_make()
file.pah("A", "B", "C")
file.path("A", "B", "C")
knitr::opts_chunk$set(echo = TRUE)
level_name <- "Order"
level_value <- "ORDER Poputre"
df <- read.csv(file = file.path('level', level_name, level_value, veg_reports))
level_name <- "Order"
level_value <- "ORDER Poputre"
df <- read.csv(file = file.path('level', level_name, level_value, veg_reports))
getwd()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, veg_reports, ))
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, veg_reports, layer_name))
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, veg_reports, layer_name))
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, caption = "An example table caption.")
Moss_layer_table_data
Tree_layer_table_data
Veg_Plot_data_for_level[Veg_Plot_data_for_level$TotalA > 0]
Tree_layer_table_data
a = c(1,2,3)
b = ("A", "B", "C")
b = c("A", "B", "C")
c = c("x", "y", "x")
df <- data.frame(a,b,c)
df
df[, c("b", "c", "a")]
df[, c("n", "b", "c", "a")]
df2 <- df[, c("b", "c", "a")]
df2$new <- c("test")
df2
df2$new2 <- "test"
df2
df2$new3 <- c("hello")
df2
df2$new4 <- c()
df2
df2$new4 <- c("")
df2
tar_make()
df
df$test <- c("")
df
df
df["test"]
df["test"][1]
df["test"][[1]]
df["test"][[1]] <- "r"
df
df["test",] <- "r"
df
df2
df2["test"]
df2["new3"]
df2
df2[2,"a"]
df2[2,"a"] <- 10
df2
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, caption = "An example table caption.")
str_replace("test_test", "_", " ")
tar_make()
knitr::kable(df, caption = "An example table caption.")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, caption = "An example table caption.")
df <- df[,-1]
knitr::kable(df, caption = "An example table caption.")
df
df$constantcy <-round(df1$constantcy, digit=2)
df$constantcy <-round(df$constantcy, digit=2)
df
percent(10)
percent(0.5)
df$constantcy <- percent(df$constantcy)
df
df$constantcy <- percent(df$constantcy)
sum(df$constantcy)
tar_make()
df
tar_make()
df
df <- df[,-1]
print(sum(df$constantcy))
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
df <- df[,-1]
print(sum(df$constantcy))
#df$constantcy <- percent(df$constantcy)
knitr::kable(df, caption = "An example table caption.")
df <- df[,-1]
df$constantcy <- percent(df$constantcy)
knitr::kable(df, caption = "An example table caption.")
knitr::opts_chunk$set(echo = TRUE)
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
df <- df[,-1]
df$constantcy <- percent(df$constantcy)
knitr::kable(df, caption = "An example table caption.")
df <- df[,-1]
df$constantcy <- percent(df$constantcy)
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
df <- df[,-1]
df$constantcy <- percent(df$constantcy)
knitr::kable(df, caption = "An example table caption.")
tar_male()
tar_make()
tar_make()
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, caption = "An example table caption.")
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, caption = "An example table caption.")
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, caption = "An example table caption.")
names(df) <- c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name")
df <- df[,-1]
knitr::kable(df, caption = "An example table caption.")
names(df) <- c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name")
knitr::kable(df, caption = "An example table caption.")
names(df) <- c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
names(df) <- c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name")
knitr::kable(df, caption = "An example table caption.")
df <- df[,-1]
names(df) <- c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name")
knitr::kable(df, caption = "An example table caption.")
df <- df[,-1]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, col.names = c("Index","Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
rownames(df) <- c()
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::kable(df,row.names = NULL, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::kable(df, caption = "An example table caption.")
df <- df[,-1]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
df <- df[,-1]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
#df <- df[,-1]
df <- subset(df, select = - c(""))
#df <- df[,-1]
df <- subset(df, select = - c("x"))
#df <- df[,-1]
df <- subset(df, select = - c("X"))
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
#df <- df[,-1]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
print(names(df))
df <- df[, c("Layer","ScientificName", "constantcy","meanCover","EnglishName")]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
knitr::opts_chunk$set(echo = TRUE)
df <- df[, c("Layer","ScientificName", "constantcy","meanCover","EnglishName")]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.")
rbind(df, df)
df2
rbind(df2, df2)
df
df2
rbind(df2, df2, df2)
df <- df[, c("Layer","ScientificName", "constantcy","meanCover","EnglishName")]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.") %>% row_spec(x, 2, extra_css = "border-bottom: 1px solid")
df <- df[, c("Layer","ScientificName", "constantcy","meanCover","EnglishName")]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.") %>% kableExtra::row_spec(x, 2, extra_css = "border-bottom: 1px solid")
knitr::opts_chunk$set(echo = TRUE)
require(kable)
knitr::opts_chunk$set(echo = TRUE)
df <- df[, c("Layer","ScientificName", "constantcy","meanCover","EnglishName")]
knitr::kable(df, col.names = c("Layer", "Scientific Name", "Constantcy", "Mean Cover", "English Name"), caption = "An example table caption.") %>% kableExtra::row_spec(x, 2, extra_css = "border-bottom: 1px solid")
print(names(df))
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
make_tar()
make_tar()
tar_make()
level_name <- "Order"
level_value <- "ORDER Poputre"
layer_name <- "Herb_Layer"
df <- read.csv(file = file.path('level', level_name, level_value, "veg_reports", layer_name))
