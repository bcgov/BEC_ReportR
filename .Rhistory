require(dplyr)
source("CodeUsingTreeFunctions.R")
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
ENV_Plot_data <- fread("./BEC_ReportR/Plot_Data/BECMaster19_ENV.csv")
Humus_Plot_data <- fread("./BEC_ReportR/Plot_Data/BECMaster19_Humus.csv")
Mineral_Plot_data <- fread("./BEC_ReportR/Plot_Data/BECMaster19_Mineral.csv")
Climate_Plot_data <- fread("./BEC_ReportR/Plot_Data/BECMaster_Plot_Climatedata.csv")
#Create this csv file manualy
env_variables_summary_functions <- data.frame(variable_name=names(ENV_Plot_data))
write.csv(env_variables_summary_functions,"./env_variables_summary_functions.csv", row.names = FALSE)
x <- c("A", "B", "G")
y <- c(5, 3, 7)
z <- c("A", "X", "Z")
r <- c("A", "T", "T")
rolled_up_list <- list()
df <- data.frame(x, y, z, r)
lookup_df <- data.frame(variable_name=c("x", "y", "z", "r"), function_name=c("table", "min", "table", "table"))
for (name in names(df)) {
fun <- lookup_df %>% filter(variable_name == name) %>% pull("function_name")
rolled_up_list <- append(rolled_up_list, list(do.call(fun, df[name])))
}
print(rolled_up_list)
x <- c("A", "B", "G")
y <- c(5, 3, 7)
z <- c("A", "X", "Z")
r <- c("A", "T", "T")
rolled_up_list <- list()
df <- data.frame(x, y, z, r)
lookup_df <- data.frame(variable_name=c("x", "y", "z", "r"), function_name=c("table", "min", "table", "table"))
for (name in names(df)) {
fun <- lookup_df %>% filter(variable_name == name) %>% pull("function_name")
rolled_up_list <- append(rolled_up_list, list(do.call(fun, df[name])))
}
print(rolled_up_list)
# Alternative
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_levels <- unique(Hier.data[[level]])
print(unique_levels)
level_rows <- Hier.data %>% filter(!!as.name(level) ==  level_value)
site_units <- unique(level_rows$SiteUnit)
plot_numbers_in_level <- SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
#ENV_Plot_data %>% filter(plot_numbers_in_level)
env_rows <- ENV_Plot_data[ENV_Plot_data$PlotNumber %in% plot_numbers_in_level]
createHierReportData <- function(level_name, level_value) {
heir_summary <- list()
# Select relevent rows from Heir.data
level_rows <- Hier.data %>% filter(!!as.name(level) == level_value )
# Levels
site_units <- unique(level_rows$SiteUnit)
classes <- unique(level_rows$Class)
orders <- unique(level_rows$Order)
sub_orders <- unique(level_rows$Suborder)
alliances <- unique(level_rows$Alliance)
associations <- unique(level_rows$Assoc)
# Categorical Variables
heir_summary["species_frequency_count"] <- list(table(level_rows$Species))
# Variables
mean_cover <- level_rows$MeanCov
constancy <- level_rows$Constancy
number_of_plots <- level_rows$nPlots
# Aggregated Variables
heir_summary["average_mean_cover"] <- mean(mean_cover)
heir_summary["average_constancy"] <- mean(constancy)
heir_summary["total_number_of_plots"] <- sum(number_of_plots)
# Maybe return plot_numbers_in_level (or write it) and to below in a different step
# Look up plots
plot_numbers_in_level <- SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
# Get relevant plot data rows from each Plot data file
ENV_Plot_data_for_level <- ENV_Plot_data[ENV_Plot_data$PlotNumber %in% plot_numbers_in_level]
Humus_Plot_data_for_level <- Humus_Plot_data[Humus_Plot_data$PlotNumber %in% plot_numbers_in_level]
Mineral_Plot_data_for_level <- Mineral_Plot_data[Mineral_Plot_data$PlotNumber %in% plot_numbers_in_level]
Climate_Plot_data_for_level <-  Climate_Plot_data[ Climate_Plot_data$PlotNumber %in% plot_numbers_in_level]
# Write relevant plot data rows from each Plot
}
#levelName <- unique_levels[[4]]
createHierReportData(level_name, level_value)
#lapply(uniqueClasses, createReportData(levelName))
source("./_functions/_CreateHierReportData.R")
Hier.data[["Order"]
]
View(Hier.data)
l
l["B"] <- c(3,4,5)
l["B"] <- list(3,4,5)
l
l
l <- list
l
l <- list()
l
l["a"] <- 1
l
l["b"] <- list(1,2,3)
l
l <- list()
l["a"] <- 1
l
l[["b"]] <- list(1,2,3)
l
l$b
list(1,2,3)
l
l[["x"]] <- 5
l
v <- "test"
l[[cat("this is a", v)]] <- 55
cat("this is a", v)
l[["h"]] ,- 78
l[["h"]] <- 78
l[[cat("this is a", v)]] <- 55
l[[cat("this is a", v)]] <- 55
str <- cat("this is a", v)
l[[str]] <- 43
l[cat("this is a", v)] <- 55
l
l[cat("this is a", v)] <- 55
l
l[["this_is_a"]] <- 78
l
l$b
knitr::opts_chunk$set(echo = FALSE)
require(tidyverse)
require(tidymodels)
require(data.table)
require(data.tree)
require(DataExplorer)
require(C50)
require(indicspecies)
require(doParallel)
require(philentropy)
require(dplyr)
source("CodeUsingTreeFunctions.R")
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
knitr::opts_chunk$set(echo = FALSE)
require(tidyverse)
require(tidymodels)
require(data.table)
require(data.tree)
require(DataExplorer)
require(C50)
require(indicspecies)
require(doParallel)
require(philentropy)
require(dplyr)
source("CodeUsingTreeFunctions.R")
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
cat("./reports/", level_name, "/", str_replace_all(level_value, "", "_"), ".rdata", sep = "")
level_value
tr_replace_all(level_value, "", "_")
str_replace_all(level_value, "", "_")
str_replace("a b", " ", "_")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
knitr::opts_chunk$set(echo = FALSE)
require(tidyverse)
require(tidymodels)
require(data.table)
require(data.tree)
require(DataExplorer)
require(C50)
require(indicspecies)
require(doParallel)
require(philentropy)
require(dplyr)
source("CodeUsingTreeFunctions.R")
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
knitr::opts_chunk$set(echo = FALSE)
require(tidyverse)
require(tidymodels)
require(data.table)
require(data.tree)
require(DataExplorer)
require(C50)
require(indicspecies)
require(doParallel)
require(philentropy)
require(dplyr)
source("CodeUsingTreeFunctions.R")
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value)
createHierReportData(level_name, level_value, SUTab)
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
heir_summary[[cat("plot_numbers_in_", level_name, sep="")]] <- SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
heir_summary
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
cat("plot_numbers_in_", level_name, sep="")
l
unique_classes <- unique(Hier.data[["Class"]])
l[[cat("plot_numbers_in_", level_name, sep="")]] <- SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
typeof SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
typeof(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units] )
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
knitr::opts_chunk$set(echo = FALSE)
require(tidyverse)
require(tidymodels)
require(data.table)
require(data.tree)
require(DataExplorer)
require(C50)
require(indicspecies)
require(doParallel)
require(philentropy)
require(dplyr)
source("CodeUsingTreeFunctions.R")
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
l[[cat("plot_numbers_in_", level_name, sep="")]] <- list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
cat("plot_numbers_in_", level_name, sep="")
SUTab$PlotNumber[SUTab$SiteUnit %in% site_units]
l[[cat("plot_numbers_in_", level_name, sep="")]] <- list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
l[["K"]] <- list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
l[[cat("c", "i", sep="")]] <- list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
cat("c", "i", sep="")
typeof(cat("c", "i", sep=""))
paste("A", "B")
paste("A", "B", sep="")
paste("./reports/", level_name, "/", str_replace_all(level_value, " ", "_"), ".rdata", sep = "")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
pwd
getwd()
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
#lapply(uniqueClasses, createReportData(levelName))
load("/Users/okanji/Desktop/Work/Ecosystem Classification/Ecosystem Classification Proj/reports/ORDER_Poputre.rdata")
# Look up plots
heir_summary[[paste("plot_numbers_in_", level_name, sep="")]] <- list(SUTab$PlotNumber[SUTab$SiteUnit %in% site_units])
saveRDS(heir_summary, file=paste("./reports/", level_name, "/", str_replace_all(level_value, " ", "_"), ".RDS", sep = ""))
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
for()
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
saveRDS(heir_summary, file=paste("./reports/", str_replace_all(level_value, " ", "_"), ".RDS", sep = ""))
source("./_functions/_TabletoTree.R")
source("./_functions/_TreetoTable.R")
source("./_functions/_VegdatSUsummary.R")
source("./_functions/_spp_importance.R")
source("./_functions/_CreateHierReportData.R")
# Need to do for each level for each level_value in level
level_name <- "Order"
level_value <- "ORDER Poputre"
unique_classes <- unique(Hier.data[["Class"]])
unique_orders <- unique(Hier.data[["Order"]])
unique_suborder <- unique(Hier.data[["Suborder"]])
unique_alliance <- unique(Hier.data[["Alliance"]])
unique_assoc <- unique(Hier.data[["Assoc"]])
createHierReportData(level_name, level_value, SUTab)
#lapply(uniqueClasses, createReportData(levelName))
